### Описание и состав репозитория

В данном репозитории хранится код на `Python`, который может ходить в данные Яндекс Метрики, размещенные в ClickHouse в формате таблицы визитов из коннектора для [Метрики Про](https://yandex.ru/support/metrica/pro/cloud.html).

В данном коде из визитов формируются цепочки переходов для каждого пользователя, для того, чтобы можно было анализировать:
* Ассоциированные конверсии
* Простые позиционные модели атрибуции (Последний переход, Последний значимый переход, Первый переход, Последний переход из Яндекс Директа, Линейная / Равномерная)
* Позиции источника в цепочках переходов.

Для такой аналитики создан класс-интерфейс `DataPreparer`. Он (и нужные для работы скрипты для ClickHouse) описан в модуле `analyse_channels_chain.py`.

Демонстрация работы описана в 3-х Jupyter Notebook'ах
* `0. check clickhouse connection.ipynb` - Проверка, есть ли доступ до ClickHouse
* `1. prepare visits table.ipynb` - Необязательный пункт, загрузка визитов в нужном формате, если коннектора пока нет, а данные были получены с помощью [Logs API](https://yandex.ru/dev/metrika/doc/api2/logs/intro.html)
* `2. analysis of channels chains.ipynb` - Основной NoteBook для работы. В нем будет инициализирован экземпляр класса, будут собраны визиты в нужном формате из ClickHouse таблиц, создание цепочек и их анализ.

Этот репозитория является некоторым продолжением [соседнего](https://github.com/zhdanchik/yandex_metrika_cloud_case) в котором анализировались и визуализировались в DataLens данные Яндекс Метрики полученные через Logs API. 

Далее, по мере спроса и времени тут будут добавляться более продвинутые методы атрибуций:
- на основе Shapley-value
- на основе Марковских цепей
- Data-driven, на основе моделирования эффекта от различных касаний.

Все вопросы по работе можно оставлять в [чате](https://t.me/+iOX-bP4j-xg2MWMy) в Телеграм или присылать Pull-request'ы. 
